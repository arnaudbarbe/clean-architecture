asyncapi: 2.5.0
info:
  title: API async entry point
  version: 1.0.0
  description: The Awesome API async entry point
  contact:
    name: Arnaud Barbe
    email: arnaud.barbe@free.ru
servers:
  rabbitmq:
    url: localhost:5672
    description: Local RabbitMQ
    protocol: amqp
    protocolVersion: "0.9.1"
channels:




  createLeague:
    publish:
      operationId: createLeaguePub
      description: The league to create
      message:
        $ref: "#/components/messages/league"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: createLeagueSub
      description: The league to create
      message:
        $ref: "#/components/messages/league"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: createLeagueExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0
  updateLeague:
    publish:
      operationId: updateLeaguePub
      description: The league to update
      message:
        $ref: "#/components/messages/league"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: updateLeagueSub
      description: The league to update
      message:
        $ref: "#/components/messages/league"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: updateLeagueExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0
  deleteLeague:
    publish:
      operationId: deleteLeaguePub
      description: The league to delete
      message:
        $ref: "#/components/messages/id"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: deleteLeagueSub
      description: The league to delete
      message:
        $ref: "#/components/messages/id"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: deleteLeagueExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0





  createPlayer:
    publish:
      operationId: createPlayerPub
      description: The player to create
      message:
        $ref: "#/components/messages/player"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: createPlayerSub
      description: The player to create
      message:
        $ref: "#/components/messages/player"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: createPlayerExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0
  updatePlayer:
    publish:
      operationId: updatePlayerPub
      description: The player to update
      message:
        $ref: "#/components/messages/player"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: updatePlayerSub
      description: The player to update
      message:
        $ref: "#/components/messages/player"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: updatePlayerExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0
  deletePlayer:
    publish:
      operationId: deletePlayerub
      description: The player to delete
      message:
        $ref: "#/components/messages/id"
      bindings:
        amqp:
          timestamp: true
          ack: false
          bindingVersion: 0.2.0
    subscribe:
      operationId: deletePlayerSub
      description: The player to delete
      message:
        $ref: "#/components/messages/id"
    bindings:
      amqp:
        is: routingKey
        exchange:
          name: deletePlayerExchange
          type: direct
          durable: true
          vhost: /
        bindingVersion: 0.2.0

components:
  messages:
    league:
      payload:
        type: object
        required: 
          - id
          - name
        properties:
          id:
            type: string
            description: the league id
          name:
            type: string
            description: the league name
    player:
      payload:
        type: object
        required: 
          - id
          - firstName
          - lastName
        properties:
          id:
            type: string
            description: the player id
          firstName:
            type: string
            description: the player firstName
          lastName:
            type: string
            description: the player lastName
    id:
      payload:
        type: object
        required: 
          - id
        properties:
          id:
            type: string
            description: the object id

